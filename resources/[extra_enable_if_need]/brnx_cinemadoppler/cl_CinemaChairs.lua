-----------------------------------------------------------------------------------------------------------------
-- CHAIRS
-----------------------------------------------------------------------------------------------------------------
local Chairs = {
	-- column 1
	-- line 01
	vector3(360.47, 217.05, 102.45),
	vector3(359.47, 217.45, 102.45),
	vector3(358.43, 217.75, 102.45),
	vector3(357.40, 218.15, 102.45),
	-- line 02
	vector3(361.20, 219.15, 102.85),
	vector3(360.20, 219.45, 102.85),
	vector3(359.17, 219.85, 102.85),
	vector3(358.15, 220.25, 102.85),
	-- line 03
	vector3(361.95, 221.15, 103.25),
	vector3(360.95, 221.55, 103.25),
	vector3(359.95, 221.95, 103.25),
	vector3(358.90, 222.25, 103.25),
	-- line 04
	vector3(362.75, 223.25, 103.62),
	vector3(361.75, 223.60, 103.62),
	vector3(360.75, 223.95, 103.62),
	vector3(359.65, 224.35, 103.62),
	-- line 05
	vector3(363.45, 225.30, 104.01),
	vector3(362.45, 225.65, 104.01),
	vector3(361.43, 226.05, 104.01),
	vector3(360.40, 226.45, 104.01),
	-- line 06
	vector3(364.22, 227.40, 104.40),
	vector3(363.20, 227.75, 104.40),
	vector3(362.18, 228.10, 104.40),
	vector3(361.15, 228.48, 104.40),
	-- line 07
	vector3(364.98, 229.45, 104.79),
	vector3(363.95, 229.80, 104.79),
	vector3(362.93, 230.20, 104.79),
	vector3(361.90, 230.55, 104.79),
	-- line 08
	vector3(365.69, 231.55, 105.18),
	vector3(364.69, 231.90, 105.18),
	vector3(363.69, 232.25, 105.18),
	vector3(362.65, 232.60, 105.18),
	-- line 09
	vector3(366.48, 233.60, 105.55),
	vector3(365.46, 233.95, 105.55),
	vector3(364.44, 234.35, 105.55),
	vector3(363.42, 234.70, 105.55),
	-- line 10
	vector3(367.22, 235.65, 105.93),
	vector3(366.20, 236.00, 105.93),
	vector3(365.18, 236.35, 105.93),
	vector3(364.16, 236.70, 105.93),
	vector3(363.14, 237.05, 105.93),
	-- column 2
	-- line 01
	vector3(353.64, 219.50, 102.45),
	vector3(352.60, 219.85, 102.45),
	vector3(351.58, 220.25, 102.45),
	vector3(350.56, 220.60, 102.45),
	vector3(349.54, 221.05, 102.45),
	vector3(348.52, 221.40, 102.45),
	vector3(347.50, 221.75, 102.45),
	vector3(346.48, 222.10, 102.45),
	-- line 02
	vector3(354.38, 221.60, 102.85),
	vector3(353.36, 222.00, 102.85),
	vector3(352.34, 222.35, 102.85),
	vector3(351.32, 222.70, 102.85),
	vector3(350.28, 223.10, 102.85),
	vector3(349.26, 223.45, 102.85),
	vector3(348.24, 223.80, 102.85),
	vector3(347.22, 224.20, 102.85),
	-- line 03
	vector3(355.14, 223.65, 103.25),
	vector3(354.12, 224.00, 103.25),
	vector3(353.08, 224.40, 103.25),
	vector3(352.06, 224.75, 103.25),
	vector3(351.04, 225.15, 103.25),
	vector3(350.02, 225.50, 103.25),
	vector3(348.98, 225.90, 103.25),
	vector3(347.96, 226.20, 103.25),
	-- line 04
	vector3(355.88, 225.75, 103.62),
	vector3(354.88, 226.15, 103.62),
	vector3(353.84, 226.45, 103.62),
	vector3(352.82, 226.80, 103.62),
	vector3(351.80, 227.20, 103.62),
	vector3(350.78, 227.55, 103.62),
	vector3(349.76, 227.90, 103.62),
	vector3(348.74, 228.30, 103.62),
	-- line 05
	vector3(356.62, 227.83, 104.01),
	vector3(355.60, 228.20, 104.01),
	vector3(354.58, 228.55, 104.01),
	vector3(353.54, 228.95, 104.01),
	vector3(352.52, 229.30, 104.01),
	vector3(351.50, 229.70, 104.01),
	vector3(350.50, 230.05, 104.01),
	vector3(349.46, 230.40, 104.01),
	-- line 06
	vector3(357.42, 229.85, 104.40),
	vector3(356.34, 230.25, 104.40),
	vector3(355.34, 230.62, 104.40),
	vector3(354.32, 231.00, 104.40),
	vector3(353.30, 231.35, 104.40),
	vector3(352.28, 231.70, 104.40),
	vector3(351.26, 232.10, 104.40),
	vector3(350.24, 232.45, 104.40),
	-- line 07
	vector3(358.14, 231.95, 104.79),
	vector3(357.12, 232.30, 104.79),
	vector3(356.10, 232.70, 104.79),
	vector3(355.08, 233.05, 104.79),
	vector3(354.06, 233.40, 104.79),
	vector3(353.04, 233.80, 104.79),
	vector3(352.01, 234.15, 104.79),
	vector3(351.00, 234.55, 104.79),
	-- line 08
	vector3(358.90, 234.00, 105.18),
	vector3(357.88, 234.35, 105.18),
	vector3(356.86, 234.75, 105.18),
	vector3(355.84, 235.10, 105.18),
	vector3(354.80, 235.50, 105.18),
	vector3(353.78, 235.85, 105.18),
	vector3(352.76, 236.25, 105.18),
	vector3(351.76, 236.60, 105.18),
	-- line 09
	vector3(359.66, 236.05, 105.55),
	vector3(358.64, 236.45, 105.55),
	vector3(357.62, 236.80, 105.55),
	vector3(356.60, 237.20, 105.55),
	vector3(355.58, 237.55, 105.55),
	vector3(354.56, 237.90, 105.55),
	vector3(353.52, 238.30, 105.55),
	vector3(352.50, 238.68, 105.55),
	-- line 10
	vector3(361.44, 237.75, 105.93),
	vector3(360.42, 238.15, 105.93),
	vector3(359.40, 238.50, 105.93),
	vector3(358.36, 238.90, 105.93),
	vector3(357.34, 239.25, 105.93),
	vector3(356.32, 239.60, 105.93),
	vector3(355.30, 240.00, 105.93),
	vector3(354.26, 240.35, 105.93),
	vector3(353.26, 240.75, 105.93),
	vector3(352.24, 241.10, 105.93),
	-- column 3
	-- line 01
	vector3(342.68, 223.50, 102.45),
	vector3(341.66, 223.88, 102.45),
	vector3(340.64, 224.25, 102.45),
	vector3(339.62, 224.65, 102.45),
	-- line 02
	vector3(343.44, 225.60, 102.85),
	vector3(342.42, 225.95, 102.85),
	vector3(341.40, 226.30, 102.85),
	vector3(340.38, 226.70, 102.85),
	-- line 03
	vector3(344.22, 227.65, 103.25),
	vector3(343.16, 228.00, 103.25),
	vector3(342.14, 228.40, 103.25),
	vector3(341.12, 228.75, 103.25),
	-- line 04
	vector3(344.94, 229.70, 103.62),
	vector3(343.92, 230.10, 103.62),
	vector3(342.90, 230.45, 103.62),
	vector3(341.88, 230.85, 103.62),
	-- line 05
	vector3(345.68, 231.80, 104.01),
	vector3(344.66, 232.15, 104.01),
	vector3(343.64, 232.55, 104.01),
	vector3(342.62, 232.90, 104.01),
	-- line 06
	vector3(346.44, 233.85, 104.40),
	vector3(345.42, 234.25, 104.40),
	vector3(344.40, 234.60, 104.40),
	vector3(343.38, 234.95, 104.40),
	-- line 07
	vector3(347.20, 235.95, 104.79),
	vector3(346.18, 236.30, 104.79),
	vector3(345.16, 236.65, 104.79),
	vector3(344.14, 237.05, 104.79),
	-- line 08
	vector3(347.94, 238.00, 105.18),
	vector3(346.92, 238.40, 105.18),
	vector3(345.90, 238.75, 105.18),
	vector3(344.88, 239.10, 105.18),
	-- line 09
	vector3(348.70, 240.05, 105.55),
	vector3(347.68, 240.45, 105.55),
	vector3(346.66, 240.80, 105.55),
	vector3(345.64, 241.15, 105.55),
	-- line 09
	vector3(350.48, 241.75, 105.93),
	vector3(349.46, 242.15, 105.93),
	vector3(348.44, 242.50, 105.93),
	vector3(347.42, 242.88, 105.93),
	vector3(346.40, 243.23, 105.93),
}
-----------------------------------------------------------------------------------------------------------------
-- KEYPRESS
-----------------------------------------------------------------------------------------------------------------
Citizen.CreateThread(function()
	while true do
		-- wait for next loop
		Citizen.Wait(1)
		-- key E
		if IsControlJustReleased(0, 51) then 
			-- ped
			local Ped = PlayerPedId()
			-- check in coords for optimized
			if GetDistanceBetweenCoords(GetEntityCoords(Ped), vector3(353.41659545898, 230.01422119141, 104.84748077393), false) < 100 then
				if not IsPedUsingAnyScenario(Ped) then
					-- check
					for Index, Value in pairs(Chairs) do
						if GetDistanceBetweenCoords(GetEntityCoords(Ped), Value, false) < 0.8 and not IsPedUsingAnyScenario(Ped) then
							-- sit
							TaskStartScenarioAtPosition(Ped, 'PROP_HUMAN_SEAT_BENCH', Value, 166.0, 0, true, true)
							-- break this loop
							break
						end
					end
				else
					-- clear
					ClearPedTasks(Ped)
				end
			end
		end
	end	
end)

----------------------------------------
-- LIGHTS
----------------------------------------
local switch = false

local range = 20.0

RegisterCommand("lights", function()
    switch = not switch
end, false)

CreateThread(function()
    local continue = true
    while true do
        Wait(0)
        
        continue = true
        if #(GetEntityCoords(PlayerPedId()) - vector3(352.0, 226.0, 105.0)) >= range then
            continue = false
        end

        if not switch or continue == false then
            Wait(1000)
        else
            DrawLightWithRangeAndShadow(352.0, 226.0, 105.0, 255, 255, 255, range, 10.0, 10.0)
        end
    end
end)